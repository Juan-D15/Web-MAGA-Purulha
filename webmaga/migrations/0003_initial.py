# Generated by Django 5.2.7 on 2025-11-09 15:41

import django.db.models.deletion
import django.utils.timezone
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('webmaga', '0002_create_actividad_portadas'),
    ]

    operations = [
        migrations.CreateModel(
            name='ActividadComunidad',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Comunidad de Actividad',
                'verbose_name_plural': 'Comunidades de Actividades',
                'db_table': 'actividad_comunidades',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ActividadPortada',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('archivo_nombre', models.CharField(max_length=255)),
                ('archivo_tipo', models.CharField(blank=True, max_length=100, null=True)),
                ('url_almacenamiento', models.TextField()),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Portada de Actividad',
                'verbose_name_plural': 'Portadas de Actividades',
                'db_table': 'actividad_portadas',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Actividad',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nombre', models.CharField(max_length=200)),
                ('fecha', models.DateField()),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('estado', models.CharField(choices=[('planificado', 'Planificado'), ('en_progreso', 'En Progreso'), ('completado', 'Completado'), ('cancelado', 'Cancelado')], default='planificado', max_length=50)),
                ('latitud', models.DecimalField(blank=True, decimal_places=8, max_digits=10, null=True)),
                ('longitud', models.DecimalField(blank=True, decimal_places=8, max_digits=11, null=True)),
                ('version', models.IntegerField(default=1)),
                ('ultimo_sync', models.DateTimeField(blank=True, null=True)),
                ('modificado_offline', models.BooleanField(default=False)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
                ('eliminado_en', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Actividad',
                'verbose_name_plural': 'Actividades',
                'db_table': 'actividades',
                'ordering': ['-fecha'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Beneficiario',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('activo', models.BooleanField(default=True)),
                ('version', models.IntegerField(default=1)),
                ('ultimo_sync', models.DateTimeField(blank=True, null=True)),
                ('modificado_offline', models.BooleanField(default=False)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Beneficiario',
                'verbose_name_plural': 'Beneficiarios',
                'db_table': 'beneficiarios',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Colaborador',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nombre', models.CharField(max_length=150)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('telefono', models.CharField(blank=True, max_length=20, null=True)),
                ('correo', models.EmailField(blank=True, max_length=100, null=True)),
                ('dpi', models.CharField(blank=True, max_length=20, null=True)),
                ('es_personal_fijo', models.BooleanField(default=False)),
                ('activo', models.BooleanField(default=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Colaborador',
                'verbose_name_plural': 'Colaboradores',
                'db_table': 'colaboradores',
                'ordering': ['nombre'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ColaSincronizacion',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('dispositivo_id', models.CharField(blank=True, max_length=100, null=True)),
                ('operacion', models.CharField(choices=[('INSERT', 'Insert'), ('UPDATE', 'Update'), ('DELETE', 'Delete')], max_length=20)),
                ('tabla', models.CharField(max_length=100)),
                ('registro_id', models.UUIDField()),
                ('datos', models.JSONField()),
                ('datos_anteriores', models.JSONField(blank=True, null=True)),
                ('version_local', models.IntegerField(default=1)),
                ('version_servidor', models.IntegerField(blank=True, null=True)),
                ('sincronizado', models.BooleanField(default=False)),
                ('sincronizado_en', models.DateTimeField(blank=True, null=True)),
                ('intentos', models.IntegerField(default=0)),
                ('max_intentos', models.IntegerField(default=5)),
                ('ultimo_intento', models.DateTimeField(blank=True, null=True)),
                ('tiene_conflicto', models.BooleanField(default=False)),
                ('conflicto_resuelto', models.BooleanField(default=False)),
                ('error_mensaje', models.TextField(blank=True, null=True)),
                ('hash_datos', models.CharField(blank=True, max_length=64, null=True)),
                ('prioridad', models.IntegerField(default=0)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('procesado_en', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Registro de Cola de Sincronización',
                'verbose_name_plural': 'Cola de Sincronización',
                'db_table': 'cola_sincronizacion',
                'ordering': ['-creado_en'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Comunidad',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('codigo', models.CharField(max_length=20, unique=True)),
                ('nombre', models.CharField(max_length=100)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('poblacion', models.IntegerField(blank=True, null=True)),
                ('latitud', models.DecimalField(blank=True, decimal_places=8, max_digits=10, null=True)),
                ('longitud', models.DecimalField(blank=True, decimal_places=8, max_digits=11, null=True)),
                ('cocode', models.CharField(blank=True, max_length=100, null=True)),
                ('telefono_cocode', models.CharField(blank=True, max_length=20, null=True)),
                ('activo', models.BooleanField(default=True)),
                ('version', models.IntegerField(default=1)),
                ('ultimo_sync', models.DateTimeField(blank=True, null=True)),
                ('modificado_offline', models.BooleanField(default=False)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Comunidad',
                'verbose_name_plural': 'Comunidades',
                'db_table': 'comunidades',
                'ordering': ['region', 'nombre'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Puesto',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('codigo', models.CharField(max_length=20, unique=True)),
                ('nombre', models.CharField(max_length=100)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('activo', models.BooleanField(default=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Puesto',
                'verbose_name_plural': 'Puestos',
                'db_table': 'puestos',
                'ordering': ['nombre'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Region',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('codigo', models.CharField(max_length=20, unique=True)),
                ('nombre', models.CharField(max_length=100)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('comunidad_sede', models.CharField(blank=True, max_length=100, null=True)),
                ('poblacion_aprox', models.IntegerField(blank=True, null=True)),
                ('latitud', models.DecimalField(blank=True, decimal_places=8, max_digits=10, null=True)),
                ('longitud', models.DecimalField(blank=True, decimal_places=8, max_digits=11, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Región',
                'verbose_name_plural': 'Regiones',
                'db_table': 'regiones',
                'ordering': ['codigo'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='TarjetaDato',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('entidad_tipo', models.CharField(choices=[('actividad', 'Actividad'), ('comunidad', 'Comunidad'), ('region', 'Región')], max_length=20)),
                ('entidad_id', models.UUIDField()),
                ('titulo', models.CharField(max_length=100)),
                ('valor', models.TextField(blank=True, null=True)),
                ('icono', models.CharField(blank=True, max_length=50, null=True)),
                ('orden', models.IntegerField(default=0)),
                ('es_favorita', models.BooleanField(default=False)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Tarjeta de Datos',
                'verbose_name_plural': 'Tarjetas de Datos',
                'db_table': 'tarjetas_datos',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='TipoActividad',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nombre', models.CharField(max_length=100, unique=True)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('activo', models.BooleanField(default=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Tipo de Actividad',
                'verbose_name_plural': 'Tipos de Actividad',
                'db_table': 'tipos_actividad',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='TipoBeneficiario',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('codigo', models.CharField(max_length=20, unique=True)),
                ('nombre', models.CharField(choices=[('individual', 'Individual'), ('familia', 'Familia'), ('institución', 'Institución')], max_length=50)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Tipo de Beneficiario',
                'verbose_name_plural': 'Tipos de Beneficiario',
                'db_table': 'tipos_beneficiario',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='TipoComunidad',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('codigo', models.CharField(max_length=20, unique=True)),
                ('nombre', models.CharField(choices=[('barrio', 'Barrio'), ('caserío', 'Caserío'), ('aldea', 'Aldea'), ('municipio', 'Municipio')], max_length=50)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Tipo de Comunidad',
                'verbose_name_plural': 'Tipos de Comunidad',
                'db_table': 'tipos_comunidad',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ActividadCambio',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('descripcion_cambio', models.TextField()),
                ('fecha_cambio', models.DateTimeField(default=django.utils.timezone.now)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actividad', models.ForeignKey(db_column='actividad_id', on_delete=django.db.models.deletion.CASCADE, related_name='cambios', to='webmaga.actividad')),
            ],
            options={
                'verbose_name': 'Cambio de Actividad',
                'verbose_name_plural': 'Cambios de Actividades',
                'db_table': 'actividad_cambios',
                'ordering': ['-fecha_cambio'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='BeneficiarioFamilia',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nombre_familia', models.CharField(max_length=150)),
                ('jefe_familia', models.CharField(max_length=150)),
                ('dpi_jefe_familia', models.CharField(blank=True, max_length=20, null=True, unique=True)),
                ('telefono', models.CharField(blank=True, max_length=20, null=True)),
                ('numero_miembros', models.IntegerField(blank=True, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
                ('beneficiario', models.OneToOneField(db_column='beneficiario_id', on_delete=django.db.models.deletion.CASCADE, related_name='familia', to='webmaga.beneficiario')),
            ],
            options={
                'verbose_name': 'Beneficiario Familia',
                'verbose_name_plural': 'Beneficiarios Familias',
                'db_table': 'beneficiarios_familias',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='BeneficiarioIndividual',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nombre', models.CharField(max_length=150)),
                ('apellido', models.CharField(max_length=150)),
                ('dpi', models.CharField(blank=True, max_length=20, null=True, unique=True)),
                ('fecha_nacimiento', models.DateField(blank=True, null=True)),
                ('genero', models.CharField(blank=True, choices=[('masculino', 'Masculino'), ('femenino', 'Femenino'), ('otro', 'Otro')], max_length=20, null=True)),
                ('telefono', models.CharField(blank=True, max_length=20, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
                ('beneficiario', models.OneToOneField(db_column='beneficiario_id', on_delete=django.db.models.deletion.CASCADE, related_name='individual', to='webmaga.beneficiario')),
            ],
            options={
                'verbose_name': 'Beneficiario Individual',
                'verbose_name_plural': 'Beneficiarios Individuales',
                'db_table': 'beneficiarios_individuales',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='BeneficiarioInstitucion',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nombre_institucion', models.CharField(max_length=200)),
                ('tipo_institucion', models.CharField(choices=[('escuela', 'Escuela'), ('cooperativa', 'Cooperativa'), ('asociación', 'Asociación'), ('ONG', 'ONG'), ('iglesia', 'Iglesia'), ('otro', 'Otro')], max_length=50)),
                ('representante_legal', models.CharField(blank=True, max_length=150, null=True)),
                ('dpi_representante', models.CharField(blank=True, max_length=20, null=True)),
                ('telefono', models.CharField(blank=True, max_length=20, null=True)),
                ('email', models.EmailField(blank=True, max_length=100, null=True)),
                ('numero_beneficiarios_directos', models.IntegerField(blank=True, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
                ('beneficiario', models.OneToOneField(db_column='beneficiario_id', on_delete=django.db.models.deletion.CASCADE, related_name='institucion', to='webmaga.beneficiario')),
            ],
            options={
                'verbose_name': 'Beneficiario Institución',
                'verbose_name_plural': 'Beneficiarios Instituciones',
                'db_table': 'beneficiarios_instituciones',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='CambioEvidencia',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('archivo_nombre', models.CharField(max_length=255)),
                ('archivo_tipo', models.CharField(blank=True, max_length=100, null=True)),
                ('url_almacenamiento', models.TextField()),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('cambio', models.ForeignKey(db_column='cambio_id', on_delete=django.db.models.deletion.CASCADE, related_name='evidencias', to='webmaga.actividadcambio')),
            ],
            options={
                'verbose_name': 'Evidencia de Cambio',
                'verbose_name_plural': 'Evidencias de Cambios',
                'db_table': 'cambio_evidencias',
                'managed': False,
            },
        ),
        migrations.AddField(
            model_name='actividad',
            name='colaborador',
            field=models.ForeignKey(blank=True, db_column='colaborador_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='actividades_asignadas', to='webmaga.colaborador'),
        ),
        migrations.AddField(
            model_name='beneficiario',
            name='comunidad',
            field=models.ForeignKey(blank=True, db_column='comunidad_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='beneficiarios', to='webmaga.comunidad'),
        ),
        migrations.AddField(
            model_name='actividad',
            name='comunidad',
            field=models.ForeignKey(blank=True, db_column='comunidad_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='actividades', to='webmaga.comunidad'),
        ),
        migrations.CreateModel(
            name='ComunidadAutoridad',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('rol', models.CharField(max_length=50)),
                ('nombre', models.CharField(max_length=100)),
                ('telefono', models.CharField(blank=True, max_length=20, null=True)),
                ('activo', models.BooleanField(default=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
                ('comunidad', models.ForeignKey(db_column='comunidad_id', on_delete=django.db.models.deletion.CASCADE, related_name='autoridades', to='webmaga.comunidad')),
            ],
            options={
                'verbose_name': 'Autoridad de Comunidad',
                'verbose_name_plural': 'Autoridades de Comunidades',
                'db_table': 'comunidad_autoridades',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='EventoCambioColaborador',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('descripcion_cambio', models.TextField()),
                ('fecha_cambio', models.DateTimeField(default=django.utils.timezone.now)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actividad', models.ForeignKey(db_column='actividad_id', on_delete=django.db.models.deletion.CASCADE, related_name='cambios_colaboradores', to='webmaga.actividad')),
                ('colaborador', models.ForeignKey(blank=True, db_column='colaborador_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cambios_eventos', to='webmaga.colaborador')),
            ],
            options={
                'verbose_name': 'Cambio de Evento por Colaborador',
                'verbose_name_plural': 'Cambios de Evento por Colaboradores',
                'db_table': 'eventos_cambios_colaboradores',
                'ordering': ['-fecha_cambio'],
                'managed': False,
            },
        ),
        migrations.AddField(
            model_name='colaborador',
            name='puesto',
            field=models.ForeignKey(blank=True, db_column='puesto_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='colaboradores', to='webmaga.puesto'),
        ),
        migrations.AddField(
            model_name='comunidad',
            name='region',
            field=models.ForeignKey(blank=True, db_column='region_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='comunidades', to='webmaga.region'),
        ),
        migrations.AddField(
            model_name='actividad',
            name='tipo',
            field=models.ForeignKey(db_column='tipo_id', on_delete=django.db.models.deletion.RESTRICT, related_name='actividades', to='webmaga.tipoactividad'),
        ),
        migrations.AddField(
            model_name='beneficiario',
            name='tipo',
            field=models.ForeignKey(db_column='tipo_id', on_delete=django.db.models.deletion.RESTRICT, related_name='beneficiarios', to='webmaga.tipobeneficiario'),
        ),
        migrations.AddField(
            model_name='comunidad',
            name='tipo',
            field=models.ForeignKey(db_column='tipo_id', on_delete=django.db.models.deletion.RESTRICT, related_name='comunidades', to='webmaga.tipocomunidad'),
        ),
        migrations.CreateModel(
            name='Usuario',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('username', models.CharField(max_length=50, unique=True)),
                ('nombre', models.CharField(blank=True, max_length=150, null=True)),
                ('email', models.EmailField(max_length=100, unique=True)),
                ('telefono', models.CharField(blank=True, max_length=20, null=True)),
                ('password_hash', models.TextField()),
                ('rol', models.CharField(choices=[('admin', 'Administrador'), ('personal', 'Personal')], default='personal', max_length=50)),
                ('activo', models.BooleanField(default=True)),
                ('intentos_fallidos', models.IntegerField(default=0)),
                ('bloqueado_hasta', models.DateTimeField(blank=True, null=True)),
                ('ultimo_login', models.DateTimeField(blank=True, null=True)),
                ('ultimo_logout', models.DateTimeField(blank=True, null=True)),
                ('token_refresh', models.TextField(blank=True, null=True)),
                ('token_expiracion', models.DateTimeField(blank=True, null=True)),
                ('permite_offline', models.BooleanField(default=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
                ('puesto', models.ForeignKey(blank=True, db_column='puesto_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='usuarios', to='webmaga.puesto')),
            ],
            options={
                'verbose_name': 'Usuario',
                'verbose_name_plural': 'Usuarios',
                'db_table': 'usuarios',
                'ordering': ['username'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='SesionOffline',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('dispositivo_id', models.CharField(max_length=100)),
                ('token_hash', models.TextField()),
                ('refresh_token_hash', models.TextField(blank=True, null=True)),
                ('permisos_offline', models.JSONField(blank=True, null=True)),
                ('datos_cache', models.JSONField(blank=True, null=True)),
                ('sesion_activa', models.BooleanField(default=True)),
                ('iniciada_en', models.DateTimeField(default=django.utils.timezone.now)),
                ('expira_en', models.DateTimeField()),
                ('ultima_actividad', models.DateTimeField(default=django.utils.timezone.now)),
                ('ultima_sincronizacion', models.DateTimeField(blank=True, null=True)),
                ('requiere_reautenticacion', models.BooleanField(default=False)),
                ('navegador', models.CharField(blank=True, max_length=100, null=True)),
                ('sistema_operativo', models.CharField(blank=True, max_length=100, null=True)),
                ('ip_address', models.CharField(blank=True, max_length=50, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('usuario', models.ForeignKey(db_column='usuario_id', on_delete=django.db.models.deletion.CASCADE, related_name='sesiones_offline', to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Sesión Offline',
                'verbose_name_plural': 'Sesiones Offline',
                'db_table': 'sesiones_offline',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='RegionGaleria',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('archivo_nombre', models.CharField(max_length=255)),
                ('url_almacenamiento', models.TextField()),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('region', models.ForeignKey(db_column='region_id', on_delete=django.db.models.deletion.CASCADE, related_name='galeria', to='webmaga.region')),
                ('creado_por', models.ForeignKey(blank=True, db_column='creado_por', null=True, on_delete=django.db.models.deletion.SET_NULL, to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Galería de Región',
                'verbose_name_plural': 'Galerías de Regiones',
                'db_table': 'region_galeria',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='RegionArchivo',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nombre_archivo', models.CharField(max_length=255)),
                ('archivo_tipo', models.CharField(blank=True, max_length=100, null=True)),
                ('url_almacenamiento', models.TextField()),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('region', models.ForeignKey(db_column='region_id', on_delete=django.db.models.deletion.CASCADE, related_name='archivos', to='webmaga.region')),
                ('creado_por', models.ForeignKey(blank=True, db_column='creado_por', null=True, on_delete=django.db.models.deletion.SET_NULL, to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Archivo de Región',
                'verbose_name_plural': 'Archivos de Regiones',
                'db_table': 'region_archivos',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Recordatorio',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('titulo', models.CharField(max_length=200)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('due_at', models.DateTimeField()),
                ('enviar_notificacion', models.BooleanField(default=True)),
                ('enviado', models.BooleanField(default=False)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actualizado_en', models.DateTimeField(auto_now=True)),
                ('actividad', models.ForeignKey(blank=True, db_column='actividad_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='recordatorios', to='webmaga.actividad')),
                ('created_by', models.ForeignKey(blank=True, db_column='created_by', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='recordatorios_creados', to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Recordatorio',
                'verbose_name_plural': 'Recordatorios',
                'db_table': 'recordatorios',
                'ordering': ['due_at'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Evidencia',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('archivo_nombre', models.CharField(max_length=255)),
                ('archivo_tipo', models.CharField(blank=True, max_length=100, null=True)),
                ('archivo_tamanio', models.BigIntegerField(blank=True, null=True)),
                ('url_almacenamiento', models.TextField()),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('es_imagen', models.BooleanField(default=True)),
                ('version', models.IntegerField(default=1)),
                ('ultimo_sync', models.DateTimeField(blank=True, null=True)),
                ('sincronizado', models.BooleanField(default=False)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actividad', models.ForeignKey(db_column='actividad_id', on_delete=django.db.models.deletion.CASCADE, related_name='evidencias', to='webmaga.actividad')),
                ('creado_por', models.ForeignKey(blank=True, db_column='creado_por', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='evidencias_creadas', to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Evidencia',
                'verbose_name_plural': 'Evidencias',
                'db_table': 'evidencias',
                'ordering': ['-creado_en'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='EventosGaleria',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('archivo_nombre', models.CharField(max_length=255)),
                ('archivo_tipo', models.CharField(blank=True, max_length=100, null=True)),
                ('archivo_tamanio', models.BigIntegerField(blank=True, null=True)),
                ('url_almacenamiento', models.TextField()),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actividad', models.ForeignKey(db_column='actividad_id', on_delete=django.db.models.deletion.CASCADE, related_name='galeria_imagenes', to='webmaga.actividad')),
                ('creado_por', models.ForeignKey(blank=True, db_column='creado_por', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='imagenes_galeria_creadas', to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Imagen de Galería',
                'verbose_name_plural': 'Imágenes de Galería',
                'db_table': 'eventos_galeria',
                'ordering': ['-creado_en'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='EventosEvidenciasCambios',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('archivo_nombre', models.CharField(max_length=255)),
                ('archivo_tipo', models.CharField(blank=True, max_length=100, null=True)),
                ('archivo_tamanio', models.BigIntegerField(blank=True, null=True)),
                ('url_almacenamiento', models.TextField()),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actividad', models.ForeignKey(db_column='actividad_id', on_delete=django.db.models.deletion.CASCADE, related_name='evidencias_cambios', to='webmaga.actividad')),
                ('cambio', models.ForeignKey(db_column='cambio_id', on_delete=django.db.models.deletion.CASCADE, related_name='evidencias', to='webmaga.eventocambiocolaborador')),
                ('creado_por', models.ForeignKey(blank=True, db_column='creado_por', null=True, on_delete=django.db.models.deletion.SET_NULL, to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Evidencia de Cambio de Evento',
                'verbose_name_plural': 'Evidencias de Cambios de Eventos',
                'db_table': 'eventos_evidencias_cambios',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='DispositivoRegistrado',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('dispositivo_id', models.CharField(max_length=100, unique=True)),
                ('nombre_dispositivo', models.CharField(blank=True, max_length=200, null=True)),
                ('navegador', models.CharField(blank=True, max_length=100, null=True)),
                ('sistema_operativo', models.CharField(blank=True, max_length=100, null=True)),
                ('ultimo_acceso', models.DateTimeField(default=django.utils.timezone.now)),
                ('ultimo_sync', models.DateTimeField(blank=True, null=True)),
                ('activo', models.BooleanField(default=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('usuario', models.ForeignKey(db_column='usuario_id', on_delete=django.db.models.deletion.CASCADE, related_name='dispositivos', to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Dispositivo Registrado',
                'verbose_name_plural': 'Dispositivos Registrados',
                'db_table': 'dispositivos_registrados',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ConflictoSincronizacion',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tabla', models.CharField(max_length=100)),
                ('registro_id', models.UUIDField()),
                ('campo_conflicto', models.CharField(blank=True, max_length=100, null=True)),
                ('valor_local', models.JSONField(blank=True, null=True)),
                ('valor_servidor', models.JSONField(blank=True, null=True)),
                ('version_local', models.IntegerField(blank=True, null=True)),
                ('version_servidor', models.IntegerField(blank=True, null=True)),
                ('resuelto', models.BooleanField(default=False)),
                ('estrategia_resolucion', models.CharField(blank=True, choices=[('usar_servidor', 'Usar servidor'), ('usar_local', 'Usar local'), ('merge', 'Merge'), ('manual', 'Manual')], max_length=50, null=True)),
                ('valor_final', models.JSONField(blank=True, null=True)),
                ('resuelto_en', models.DateTimeField(blank=True, null=True)),
                ('detectado_en', models.DateTimeField(auto_now_add=True)),
                ('notas', models.TextField(blank=True, null=True)),
                ('cola_sincronizacion', models.ForeignKey(db_column='cola_sincronizacion_id', on_delete=django.db.models.deletion.CASCADE, related_name='conflictos', to='webmaga.colasincronizacion')),
                ('resuelto_por', models.ForeignKey(blank=True, db_column='resuelto_por', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='conflictos_resueltos', to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Conflicto de Sincronización',
                'verbose_name_plural': 'Conflictos de Sincronización',
                'db_table': 'conflictos_sincronizacion',
                'ordering': ['-detectado_en'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ComunidadGaleria',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('archivo_nombre', models.CharField(max_length=255)),
                ('url_almacenamiento', models.TextField()),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('comunidad', models.ForeignKey(db_column='comunidad_id', on_delete=django.db.models.deletion.CASCADE, related_name='galeria', to='webmaga.comunidad')),
                ('creado_por', models.ForeignKey(blank=True, db_column='creado_por', null=True, on_delete=django.db.models.deletion.SET_NULL, to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Galería de Comunidad',
                'verbose_name_plural': 'Galerías de Comunidades',
                'db_table': 'comunidad_galeria',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ComunidadArchivo',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nombre_archivo', models.CharField(max_length=255)),
                ('archivo_tipo', models.CharField(blank=True, max_length=100, null=True)),
                ('url_almacenamiento', models.TextField()),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('comunidad', models.ForeignKey(db_column='comunidad_id', on_delete=django.db.models.deletion.CASCADE, related_name='archivos', to='webmaga.comunidad')),
                ('creado_por', models.ForeignKey(blank=True, db_column='creado_por', null=True, on_delete=django.db.models.deletion.SET_NULL, to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Archivo de Comunidad',
                'verbose_name_plural': 'Archivos de Comunidades',
                'db_table': 'comunidad_archivos',
                'managed': False,
            },
        ),
        migrations.AddField(
            model_name='colasincronizacion',
            name='usuario',
            field=models.ForeignKey(db_column='usuario_id', on_delete=django.db.models.deletion.CASCADE, related_name='cola_sincronizacion', to='webmaga.usuario'),
        ),
        migrations.AddField(
            model_name='colaborador',
            name='creado_por',
            field=models.ForeignKey(blank=True, db_column='creado_por', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='colaboradores_creados', to='webmaga.usuario'),
        ),
        migrations.AddField(
            model_name='colaborador',
            name='usuario',
            field=models.OneToOneField(blank=True, db_column='usuario_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='colaborador', to='webmaga.usuario'),
        ),
        migrations.CreateModel(
            name='BitacoraTransaccion',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('accion', models.CharField(max_length=50)),
                ('tabla_afectada', models.CharField(max_length=100)),
                ('registro_id', models.UUIDField(blank=True, null=True)),
                ('datos_anteriores', models.JSONField(blank=True, null=True)),
                ('datos_nuevos', models.JSONField(blank=True, null=True)),
                ('ip_address', models.CharField(blank=True, max_length=50, null=True)),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('resultado', models.CharField(choices=[('exitoso', 'Exitoso'), ('fallido', 'Fallido')], max_length=20)),
                ('mensaje_error', models.TextField(blank=True, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('usuario', models.ForeignKey(blank=True, db_column='usuario_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bitacora', to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Bitácora de Transacción',
                'verbose_name_plural': 'Bitácora de Transacciones',
                'db_table': 'bitacora_transacciones',
                'ordering': ['-creado_en'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ActividadPersonal',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('rol_en_actividad', models.CharField(max_length=50)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actividad', models.ForeignKey(db_column='actividad_id', on_delete=django.db.models.deletion.CASCADE, related_name='personal', to='webmaga.actividad')),
                ('colaborador', models.ForeignKey(blank=True, db_column='colaborador_id', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='actividades_participacion', to='webmaga.colaborador')),
                ('usuario', models.ForeignKey(blank=True, db_column='usuario_id', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='actividades_asignadas', to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Personal de Actividad',
                'verbose_name_plural': 'Personal de Actividades',
                'db_table': 'actividad_personal',
                'managed': False,
            },
        ),
        migrations.AddField(
            model_name='actividadcambio',
            name='responsable',
            field=models.ForeignKey(blank=True, db_column='responsable_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cambios_realizados', to='webmaga.usuario'),
        ),
        migrations.CreateModel(
            name='ActividadArchivo',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nombre_archivo', models.CharField(max_length=255)),
                ('archivo_tipo', models.CharField(blank=True, max_length=100, null=True)),
                ('archivo_tamanio', models.BigIntegerField(blank=True, null=True)),
                ('url_almacenamiento', models.TextField()),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actividad', models.ForeignKey(db_column='actividad_id', on_delete=django.db.models.deletion.CASCADE, related_name='archivos', to='webmaga.actividad')),
                ('creado_por', models.ForeignKey(blank=True, db_column='creado_por', null=True, on_delete=django.db.models.deletion.SET_NULL, to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Archivo de Actividad',
                'verbose_name_plural': 'Archivos de Actividades',
                'db_table': 'actividad_archivos',
                'managed': False,
            },
        ),
        migrations.AddField(
            model_name='actividad',
            name='responsable',
            field=models.ForeignKey(blank=True, db_column='responsable_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='actividades_responsable', to='webmaga.usuario'),
        ),
        migrations.CreateModel(
            name='ActividadBeneficiario',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('version', models.IntegerField(default=1)),
                ('sincronizado', models.BooleanField(default=False)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('actividad', models.ForeignKey(db_column='actividad_id', on_delete=django.db.models.deletion.CASCADE, related_name='beneficiarios', to='webmaga.actividad')),
                ('beneficiario', models.ForeignKey(db_column='beneficiario_id', on_delete=django.db.models.deletion.CASCADE, related_name='actividades', to='webmaga.beneficiario')),
            ],
            options={
                'verbose_name': 'Beneficiario de Actividad',
                'verbose_name_plural': 'Beneficiarios de Actividades',
                'db_table': 'actividad_beneficiarios',
                'unique_together': {('actividad', 'beneficiario')},
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='RecordatorioColaborador',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('colaborador', models.ForeignKey(db_column='colaborador_id', on_delete=django.db.models.deletion.CASCADE, related_name='recordatorios', to='webmaga.colaborador')),
                ('recordatorio', models.ForeignKey(db_column='recordatorio_id', on_delete=django.db.models.deletion.CASCADE, related_name='colaboradores', to='webmaga.recordatorio')),
            ],
            options={
                'verbose_name': 'Colaborador del Recordatorio',
                'verbose_name_plural': 'Colaboradores del Recordatorio',
                'db_table': 'recordatorio_colaboradores',
                'unique_together': {('recordatorio', 'colaborador')},
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='PasswordResetCode',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('codigo', models.CharField(max_length=6)),
                ('token', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('expira_en', models.DateTimeField()),
                ('verificado_en', models.DateTimeField(blank=True, null=True)),
                ('usado', models.BooleanField(default=False)),
                ('intentos', models.PositiveIntegerField(default=0)),
                ('creado_en', models.DateTimeField(auto_now_add=True)),
                ('usado_en', models.DateTimeField(blank=True, null=True)),
                ('usuario', models.ForeignKey(db_column='usuario_id', on_delete=django.db.models.deletion.CASCADE, related_name='codigos_recuperacion', to='webmaga.usuario')),
            ],
            options={
                'verbose_name': 'Código de Recuperación',
                'verbose_name_plural': 'Códigos de Recuperación',
                'db_table': 'password_reset_codes',
                'indexes': [models.Index(fields=['usuario', 'codigo'], name='password_re_usuario_e7c913_idx'), models.Index(fields=['usuario', 'token'], name='password_re_usuario_86f903_idx'), models.Index(fields=['expira_en'], name='password_re_expira__785e21_idx')],
                'managed': False,
            },
        ),
        migrations.AddConstraint(
            model_name='colasincronizacion',
            constraint=models.UniqueConstraint(fields=('tabla', 'registro_id', 'operacion', 'hash_datos'), name='unique_operacion_por_registro'),
        ),
        migrations.AddConstraint(
            model_name='colaborador',
            constraint=models.CheckConstraint(condition=models.Q(models.Q(('es_personal_fijo', False), ('usuario__isnull', True)), models.Q(('es_personal_fijo', True), ('usuario__isnull', False)), _connector='OR'), name='check_personal_fijo_usuario'),
        ),
        migrations.AddConstraint(
            model_name='actividadpersonal',
            constraint=models.UniqueConstraint(fields=('actividad', 'usuario', 'colaborador'), name='unique_actividad_colaborador_usuario'),
        ),
        migrations.AddConstraint(
            model_name='actividadpersonal',
            constraint=models.CheckConstraint(condition=models.Q(('colaborador__isnull', False), ('usuario__isnull', False), _connector='OR'), name='check_tiene_colaborador_o_usuario'),
        ),
        migrations.AddConstraint(
            model_name='actividad',
            constraint=models.CheckConstraint(condition=models.Q(('responsable__isnull', False), ('colaborador__isnull', False), _connector='OR'), name='check_tiene_responsable_o_colaborador'),
        ),
    ]
